(function(t){function e(e){for(var r,i,o=e[0],c=e[1],l=e[2],p=0,f=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(f.length)f.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},s={app:0},n=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1f6f":function(t,e,a){"use strict";var r=a("ed38"),s=a.n(r);s.a},"3dfc":function(t,e,a){t.exports=a.p+"img/px-mart.7e27e243.png"},"4ec6":function(t,e,a){t.exports=a.p+"img/rt-mart.7b52adf3.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),s=a("5c96"),n=a.n(s),i=(a("0fae"),a("5aea"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-row",[a("el-col",{staticClass:"header-img",attrs:{xs:24,sm:12}}),a("el-col",{staticClass:"header-title",attrs:{xs:24,sm:12}},[t.voted?t._e():a("el-row",[a("el-col",{attrs:{xs:{span:3,offset:3},sm:{span:1,offset:5}}},[a("p",{staticClass:"title-Q Apercu-Bold"},[t._v("Q")])]),a("el-col",{attrs:{xs:{span:3,offset:3},sm:{span:12,offset:3}}},[a("p",{staticClass:"title NotoSansCJKtc-Regular"},[t._v("臺灣"),a("span",{staticClass:"Apercu-BoldItalic"},[t._v("9")]),t._v("大連鎖零售業中，"),a("br"),t._v("你最想先看到哪家"),a("span",{staticClass:"NotoSansCJKtc-Medium"},[t._v("達成減塑")]),t._v("？")])])],1),t.voted?t._e():a("el-row",[a("el-col",{attrs:{xs:{span:3,offset:3},xl:{span:12,offset:6}}},[a("p",{staticClass:"sub-title NotoSansCJKtc-Regular"},[t._v("｜ "),a("span",{staticClass:"NotoSansCJKtc-Bold"},[t._v("點擊")]),t._v("品牌方塊，即可投票  ｜ ")])])],1),t.voted?a("el-row",[a("el-col",{staticClass:"voted-title",attrs:{xs:{span:3,offset:3},xl:{span:12,offset:6}}},[a("p",{staticClass:"NotoSansCJKtc-Regular"},[t._v("臺灣"),a("span",{staticClass:"Apercu-BoldItalic"},[t._v("9")]),t._v("大連鎖零售業票選排行")]),a("el-button",{attrs:{round:""},on:{click:function(e){t.resultShow=!0}}},[t._v("\n            看實際票數\n          ")])],1)],1):t._e()],1),a("el-col",{staticClass:"block-section-container",attrs:{xs:24,sm:12}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"block-section"},[t._l(t.marts,(function(e,r){return a("el-col",{key:r,attrs:{xs:12,sm:8}},[t.voted?t._e():a("SelectBlock",{attrs:{mobile:t.mobile,targetMart:e},on:{checkSendVote:t.checkSendVote}})],1)})),t._l(t.statistics,(function(e){return a("el-col",{key:e.Name,attrs:{xs:12,sm:8}},[t.voted?a("SelectedBlock",{attrs:{rank:e.rank,mobile:t.mobile,targetMart:e.Name,selected:e.Name==t.votedTarget.Name}}):t._e()],1)}))],2),a("transition",{attrs:{name:"fade"}},[t.resultShow?a("div",{staticClass:"result-dialog"},[a("div",{staticClass:"result-dialog-content"},[t._l(t.statistics,(function(e){return a("el-row",{key:e.Name},[a("el-col",{attrs:{span:6}},[a("p",[t._v(t._s(e.Name))])]),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"percent-bar"},[a("div",{staticClass:"percent-bar-bar"},[a("div",{staticClass:"percent-bar-content",style:{width:e.percent}}),a("div",{staticClass:"percent-bar-number"},[a("p",[t._v(t._s(e.Count))])])])])])],1)})),a("el-row",{attrs:{lass:"result-info"}},[a("el-col",{attrs:{span:24}},[a("p",[t._v("統計單位：人數")])]),a("el-col",{staticClass:"result-close",attrs:{span:24}},[a("el-button",{attrs:{round:""},on:{click:function(e){t.resultShow=!1}}},[t._v("\n                  返回\n                ")])],1)],1)],2)]):t._e()])],1)],1),a("el-row",{staticClass:"footer"},[t.mobile?a("el-col",{attrs:{xs:24}}):t._e(),a("el-col",{attrs:{xs:24,sm:{span:6,offset:3}}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:4,sm:5}},[a("el-button",{staticClass:"NotoSansCJKtc-Regular",attrs:{round:""}},[t._v("\n            主頁\n          ")])],1),a("el-col",{attrs:{xs:8,sm:8}},[a("el-button",{staticClass:"NotoSansCJKtc-Regular",attrs:{round:""}},[t._v("\n            捐助支持\n          ")])],1)],1),a("el-row",[a("el-col",{attrs:{xs:12,sm:12}},[a("el-button",{staticClass:"NotoSansCJKtc-Regular",attrs:{round:""}},[t._v("\n            隱私政策與個人資料收集聲明\n          ")])],1)],1)],1),t.mobile?t._e():a("el-col",{attrs:{sm:11}},[a("p",{staticClass:"NotoSansCJKtc-Regular"},[t._v("綠色和平致力於為地球發生，我們的存在是因為脆弱的地球需要改變、需要行動。"),a("br"),t._v("但保護地球的使命不能僅靠綠色和平來完成，「您」就是改變世界的力量！")])]),t.mobile?t._e():a("el-col",{attrs:{sm:3}},[a("p",{staticClass:"NotoSansCJKtc-Regular"},[t._v("© 2019 Greenpeace")])])],1)],1)}),o=[],c=(a("55dd"),a("96cf"),a("3b8d")),l={script:"https://script.google.com/macros/s/AKfycbwfJklFVHryAT-FEqS_lTZ1ZhLEFW42xjOHzm0h9G4KiDEPJns/exec"},u=a("bc3a"),p=a.n(u),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-block",style:{backgroundImage:"url("+t.target.imgUrl+")"},on:{click:t.checkSendVote}},[a("div",{staticClass:"mart-info"},[a("p",{staticClass:"NotoSansCJKtc-Bold"},[t._v(t._s(t.target.mart))]),a("p",{staticClass:"Apercu-Bold"},[t._v(t._s(t.target.engMart))])]),a("div",{staticClass:"confirm-layer"},[a("el-button",{staticClass:"NotoSansCJKtc-Regula",attrs:{round:""}},[t._v("確定投票")])],1)])},d=[],m=(a("7514"),{name:"SelectBlock",props:["targetMart","ip"],data:function(){return{target:{mart:"愛買",engMart:"a.Mart",imgUrl:a("ada0")},marts:[{mart:"愛買",engMart:"a.mart",imgUrl:a("ada0")},{mart:"家樂福",engMart:"Carrefour",imgUrl:a("de5c")},{mart:"全聯福利中心",engMart:"PX Mart",imgUrl:a("3dfc")},{mart:"好市多",engMart:"Costco",imgUrl:a("75ba")},{mart:"全家",engMart:"FamilyMart",imgUrl:a("8ff8")},{mart:"大潤發",engMart:"RT-Mart",imgUrl:a("4ec6")},{mart:"7-ELEVEN",engMart:"7-ELEVEN",imgUrl:a("ffcb")},{mart:"頂好",engMart:"Wellcome",imgUrl:a("c823")},{mart:"美廉社",engMart:"Simple Mart",imgUrl:a("70f4")}]}},created:function(){this.bindTarget()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{checkSendVote:function(){this.$emit("checkSendVote",this.target.mart)},bindTarget:function(){var t=this,e=this.marts.find((function(e){return e.mart===t.targetMart}));e&&(this.target=e)}},watch:{targetMart:function(){this.bindTarget()}}}),g=m,h=(a("bb86"),a("2877")),v=Object(h["a"])(g,f,d,!1,null,"a9a8dde4",null),b=v.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selected-block",style:{backgroundImage:"url("+t.target.imgUrl+")"}},[a("div",{staticClass:"mart-rank"},[a("p",{staticClass:"Apercu-BoldItalic"},[t._v(t._s(t.rank))])]),a("div",{staticClass:"mart-info"},[a("p",{staticClass:"NotoSansCJKtc-Bold"},[t._v(t._s(t.target.mart))]),a("p",{staticClass:"Apercu-Bold"},[t._v(t._s(t.target.engMart))])]),t.selected?a("div",{staticClass:"confirm-layer"}):t._e()])},_=[],w={name:"SelectedBlock",props:["targetMart","selected","mobile","rank"],data:function(){return{target:{mart:"愛買",engMart:"a.Mart",imgUrl:a("ada0")},marts:[{mart:"愛買",engMart:"a.mart",imgUrl:a("ada0")},{mart:"家樂福",engMart:"Carrefour",imgUrl:a("de5c")},{mart:"全聯福利中心",engMart:"PX Mart",imgUrl:a("3dfc")},{mart:"好市多",engMart:"Costco",imgUrl:a("75ba")},{mart:"全家",engMart:"FamilyMart",imgUrl:a("8ff8")},{mart:"大潤發",engMart:"RT-Mart",imgUrl:a("4ec6")},{mart:"7-ELEVEN",engMart:"7-ELEVEN",imgUrl:a("ffcb")},{mart:"頂好",engMart:"Wellcome",imgUrl:a("c823")},{mart:"美廉社",engMart:"Simple Mart",imgUrl:a("70f4")}]}},created:function(){this.bindTarget()},methods:{bindTarget:function(){var t=this,e=this.marts.find((function(e){return e.mart===t.targetMart}));e&&(this.target=e)}},watch:{targetMart:function(){this.bindTarget()}}},x=w,M=(a("1f6f"),Object(h["a"])(x,C,_,!1,null,"19b39940",null)),k=M.exports,S={name:"app",components:{SelectBlock:b,SelectedBlock:k},data:function(){return{resultShow:!1,mobile:!1,voted:!1,loading:!1,votedTarget:{},ip:"",statistics:{},marts:["愛買","家樂福","全聯福利中心","好市多","全家","大潤發","7-ELEVEN","頂好","美廉社"]}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,window.addEventListener("resize",this.handleResize),this.handleResize(),this.marts=this.shuffle(this.marts),t.next=6,this.getIP();case 6:this.getData();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getData:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,p.a.get("".concat(l.script,"?ip=").concat(this.ip));case 4:for(s in e=t.sent,a=e.data,this.statistics=a.data,this.statistics.sort((function(t,e){return e.Count-t.Count})),r=1,this.statistics)s>0&&this.statistics[s].Count==this.statistics[s-1].Count?this.statistics[s].rank=this.statistics[s-1].rank:this.statistics[s].rank=r,r++,this.statistics[s].percent=this.statistics[s].Count/this.statistics[0].Count*100+"%";console.log(this.statistics),a.target.Name&&(this.votedTarget=a.target,this.voted=!0),this.loading=!1,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),console.log(t.t0);case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));function e(){return t.apply(this,arguments)}return e}(),getIP:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("https://api.ipify.org?format=json");case 3:e=t.sent,a=e.data,this.ip=a.ip,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),checkSendVote:function(t){this.mobile||this.sendVote(t)},sendVote:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("Name",e),a.append("IP",this.ip),t.prev=3,t.next=6,p.a.post(l.script,a);case 6:r=t.sent,s=r.data,console.log(s),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[3,11]])})));function e(e){return t.apply(this,arguments)}return e}(),shuffle:function(t){var e=t.length;while(e>0){var a=Math.floor(Math.random()*e);e--;var r=t[e];t[e]=t[a],t[a]=r}return t},handleResize:function(){window.innerWidth<768?this.mobile=!0:this.mobile=!1}}},y=S,N=(a("5c0b"),Object(h["a"])(y,i,o,!1,null,null,null)),E=N.exports;r["default"].use(n.a),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(E)}}).$mount("#app")},"5aea":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("e332"),s=a.n(r);s.a},"70f4":function(t,e,a){t.exports=a.p+"img/simple-mart.f3cd293d.png"},"730d":function(t,e,a){},"75ba":function(t,e,a){t.exports=a.p+"img/costco.eac22da4.png"},"8ff8":function(t,e,a){t.exports=a.p+"img/family.cbaf3382.png"},ada0:function(t,e,a){t.exports=a.p+"img/a-mart.48ceacb7.png"},bb86:function(t,e,a){"use strict";var r=a("730d"),s=a.n(r);s.a},c823:function(t,e,a){t.exports=a.p+"img/wellcome.c5e1c54a.jpg"},de5c:function(t,e,a){t.exports=a.p+"img/carrefour.34a418ef.png"},e332:function(t,e,a){},ed38:function(t,e,a){},ffcb:function(t,e,a){t.exports=a.p+"img/711.2f068458.jpg"}});
//# sourceMappingURL=app.1753afec.js.map